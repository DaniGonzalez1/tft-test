<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TFT Archetype Quiz </title>

    <!-- 1. Cargar React y ReactDOM -->
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>

    <!-- 2. Cargar Babel (para traducir JSX) -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

    <!-- 3. Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>

    <!-- 4. Lucide Icons -->
    <script src="https://unpkg.com/lucide@latest"></script>

    <!-- 5. html2canvas (Para la captura) -->
    <script src="https://html2canvas.hertzen.com/dist/html2canvas.min.js"></script>

    <style>
        @import url('https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;500;600&family=Playfair+Display:ital,wght@0,500;0,700;1,500&display=swap');
        @import url('https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400&display=swap');

        body {
            font-family: 'Outfit', sans-serif;
            background-color: #F9FAFB;
            color: #333333;
            overflow-x: hidden;
        }

        /* Texturas y Fondos */
        .bg-noise {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 0;
            opacity: 0.04;
            background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 200 200' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noiseFilter'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.65' numOctaves='3' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noiseFilter)'/%3E%3C/svg%3E");
        }

        .aura-blob {
            position: absolute;
            border-radius: 50%;
            filter: blur(90px);
            opacity: 0.5;
            z-index: -1;
            animation: float 14s infinite ease-in-out;
        }

        .aura-purple {
            background: #C084FC;
            width: 600px;
            height: 600px;
            top: -10%;
            right: -10%;
        }

        .aura-pink {
            background: #F472B6;
            width: 400px;
            height: 400px;
            bottom: 5%;
            left: -5%;
            animation-delay: 2s;
        }

        .aura-lime {
            background: #BEF264;
            width: 300px;
            height: 300px;
            top: 40%;
            right: 20%;
            animation-delay: 4s;
        }

        @keyframes float {

            0%,
            100% {
                transform: translate(0, 0) scale(1);
            }

            50% {
                transform: translate(20px, -30px) scale(1.05);
            }
        }

        /* TipografÃ­a */
        h1,
        h2,
        h3 {
            font-family: 'Playfair Display', serif;
        }

        .font-mono {
            font-family: 'JetBrains Mono', monospace;
        }

        /* UI Elements */
        .glass-card {
            background: rgba(255, 255, 255, 0.7);
            backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 255, 255, 0.8);
            box-shadow: 0 10px 40px rgba(167, 139, 250, 0.1);
            border-radius: 2rem;
            transition: all 0.3s ease;
        }

        .btn-pill {
            background: #8B5CF6;
            color: white;
            border: none;
            border-radius: 50px;
            padding: 14px 32px;
            font-weight: 600;
            letter-spacing: 0.05em;
            text-transform: uppercase;
            font-size: 0.85rem;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(139, 92, 246, 0.3);
        }

        .btn-pill:hover {
            background: #7C3AED;
            transform: translateY(-2px) scale(1.02);
            box-shadow: 0 10px 25px rgba(139, 92, 246, 0.4);
        }

        .btn-outline {
            background: transparent;
            color: #8B5CF6;
            border: 2px solid #E9D5FF;
            border-radius: 50px;
            padding: 12px 28px;
            font-weight: 600;
            letter-spacing: 0.05em;
            text-transform: uppercase;
            font-size: 0.8rem;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .btn-outline:hover {
            background: #F3E8FF;
            border-color: #C084FC;
        }

        .btn-option {
            background: rgba(255, 255, 255, 0.6);
            border: 1px solid rgba(255, 255, 255, 0.0);
            border-radius: 1rem;
            padding: 1.25rem;
            text-align: left;
            transition: all 0.2s;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.02);
        }

        .btn-option:hover {
            background: white;
            border-color: #A78BFA;
            transform: translateX(6px);
            box-shadow: 0 4px 12px rgba(167, 139, 250, 0.2);
        }

        .progress-track {
            background: #E9D5FF;
        }

        .progress-fill {
            background: linear-gradient(90deg, #A78BFA, #F472B6);
        }
    </style>
</head>

<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect } = React;

        // --- ICONOS (Mapeo manual para HTML) ---
        const Icon = ({ name, size = 24, className = "" }) => <i data-lucide={name} style={{ width: size, height: size }} className={className}></i>;
        const Sparkles = (p) => <Icon name="sparkles" {...p} />;
        const Crown = (p) => <Icon name="crown" {...p} />;
        const Star = (p) => <Icon name="star" {...p} />;
        const Zap = (p) => <Icon name="zap" {...p} />;
        const ArrowRight = (p) => <Icon name="arrow-right" {...p} />;
        const RefreshCcw = (p) => <Icon name="refresh-ccw" {...p} />;
        const Share2 = (p) => <Icon name="share-2" {...p} />;
        const Download = (p) => <Icon name="download" {...p} />;

        // --- DATOS COMPLETOS ---
        
        // --- BASE DE DATOS BALANCEADA (TODOS TIENEN OPORTUNIDAD) ---
            const characters = [
                // GRUPO 1: LOS AGRESIVOS / FUEGO (Reroll, DaÃ±o explosivo)
                { id: 'annie-chibi', name: 'Chibi Annie', title: 'La Hija del Fuego', desc: 'Â¡Lo quieres todo y lo quieres YA! Juegas agresivo, subes de nivel rÃ¡pido y si alguien te gana... Â¡Tibbers! No tienes paciencia para el late game.', traits: ['aggro', 'fire', 'scary', 'impulsive'], color: 'text-orange-600', borderColor: 'border-orange-500', img: 'img/chibiannie.jpg' },
                { id: 'burno', name: 'Burno', title: 'El Tilteado', desc: 'Tu relaciÃ³n con el juego es amor-odio. Te enfadas cuando pierdes, gritas, pero siempre vuelves a jugar. Eres pura pasiÃ³n y mecha corta.', traits: ['rage', 'fire', 'tilt', 'stubborn'], color: 'text-red-600', borderColor: 'border-red-500', img: 'img/burno.jpg' },
                { id: 'katarina-ba', name: 'Katarina Academia', title: 'La Asesina Competitiva', desc: 'Solo te importa eliminar al carry rival. Eres directo/a, letal y odias perder el tiempo. Si la partida dura mucho, te aburres.', traits: ['assassin', 'sharp', 'fast', 'competitive'], color: 'text-red-700', borderColor: 'border-red-600', img: 'img/katarina-ba.jpg' },

                // GRUPO 2: ECONOMÃA Y RIESGO (High Rollers)
                { id: 'mf-bb', name: 'Chibi Miss Fortune', title: 'La Magnate', desc: 'El oro lo es todo. Juegas a racha de derrotas solo para sentir la adrenalina de cobrar el botÃ­n y remontar. Te gusta el lujo y el riesgo.', traits: ['money', 'risk', 'rich', 'bounty'], color: 'text-red-500', borderColor: 'border-red-400', img: 'img/mf-bb.jpg' },
                { id: 'aoshin-sun', name: 'Ao Shin', title: 'El DragÃ³n de Late Game', desc: 'Eres paciente. Sabes que tu momento llega al final. Mientras otros pelean por migajas, tÃº construyes un imperio invencible para el nivel 9.', traits: ['late', 'dragon', 'patience', 'powerful'], color: 'text-amber-600', borderColor: 'border-amber-500', img: 'img/aoshin.jpg' },
                { id: 'teemo-devil', name: 'Teemonio', title: 'El Estratega Cruel', desc: 'Disfrutas el sufrimiento ajeno. Compras las fichas que otros quieren y usas emotes para desconcentrar. El juego psicolÃ³gico es tu fuerte.', traits: ['troll', 'evil', 'mindgame', 'toxic'], color: 'text-red-800', borderColor: 'border-red-700', img: 'img/teemo-devil.jpg' },

                // GRUPO 3: TÃ‰CNICA Y SKILL (Los Tryhards)
                { id: 'yasuo-chibi', name: 'Chibi Yasuo', title: 'El Duelista MecÃ¡nico', desc: 'Mueves tus unidades cada segundo. Buscas la perfecciÃ³n tÃ©cnica. Si pierdes, no culpas a la suerte, culpas a tu ejecuciÃ³n. Tryhard puro.', traits: ['micro', 'skill', 'loner', 'sword'], color: 'text-sky-700', borderColor: 'border-sky-600', img: 'img/chibiyasuo.jpg' },
                { id: 'ekko-chibi', name: 'Chibi Ekko', title: 'El Calculador', desc: 'Todo estÃ¡ en tu cabeza. Sabes las probabilidades exactas de cada tienda. Juegas con el tiempo y predices los movimientos del rival.', traits: ['smart', 'calc', 'tech', 'predict'], color: 'text-teal-600', borderColor: 'border-teal-400', img: 'img/ekko.jpg' },
                { id: 'ravenlord', name: 'Ravenlord', title: 'El Metagamer Oscuro', desc: 'Estudias el parche antes de jugar. Abusas de lo que estÃ¡ roto (OP) sin remordimientos. La victoria justifica los medios.', traits: ['meta', 'dark', 'win', 'ruthless'], color: 'text-violet-800', borderColor: 'border-violet-700', img: 'img/ravenlord.jpg' },

                // GRUPO 4: FLEXIBILIDAD Y ADAPTACIÃ“N
                { id: 'kaisa-chibi', name: 'Chibi Kai\'Sa', title: 'La Superviviente', desc: 'Nunca te rindes. Sabes pivotar tu composiciÃ³n en segundos si el juego te da limones. Tu instinto de supervivencia es legendario.', traits: ['flex', 'survivor', 'adapt', 'instinct'], color: 'text-fuchsia-700', borderColor: 'border-fuchsia-600', img: 'img/chibikaisa.jpg' },
                { id: 'pengu', name: 'Pengu', title: 'El ClÃ¡sico', desc: 'El equilibrio perfecto. Eres el jugador estÃ¡ndar: juegas bien, eres respetuoso y disfrutas de lo bÃ¡sico bien hecho. Eres la cara del juego.', traits: ['classic', 'balanced', 'hero', 'respect'], color: 'text-blue-600', borderColor: 'border-blue-500', img: 'img/pengu.jpg' },
                { id: 'ezreal-chibi', name: 'Chibi Ezreal', title: 'El Explorador', desc: 'Te encantan los objetos. Tu inventario siempre estÃ¡ lleno de artefactos brillantes. Priorizas equipar bien a tus unidades sobre todo lo demÃ¡s.', traits: ['items', 'explorer', 'showoff', 'adventure'], color: 'text-amber-500', borderColor: 'border-amber-400', img: 'img/chibiezreal.jpg' },

                // GRUPO 5: VIBRA ESTÃ‰TICA / MAGIA (Los que antes no salÃ­an)
                { id: 'lux-sg', name: 'Lux Star Guardian', title: 'La Optimista', desc: 'Crees en el poder de la amistad y en los tableros bonitos. Juegas verticales (ej. 9 Demacia) porque se ven geniales juntas.', traits: ['light', 'optimist', 'rainbow', 'vertical'], color: 'text-pink-500', borderColor: 'border-pink-300', img: 'img/luxstar.jpg' },
                { id: 'ahri-sg', name: 'Ahri Star Guardian', title: 'La Diva Pop', desc: 'Eres el centro de atenciÃ³n. Te gusta que tu tablero brille y tus campeones tengan las mejores skins. Estilo sobre sustancia.', traits: ['star', 'diva', 'charm', 'visuals'], color: 'text-pink-600', borderColor: 'border-pink-400', img: 'img/ahri-sg.jpg' },
                { id: 'qiqi', name: 'Qiqi', title: 'La Artista', desc: 'Te inventas composiciones que nadie mÃ¡s juega porque eres un alma creativa. Te aburre copiar a los demÃ¡s, prefieres innovar.', traits: ['art', 'create', 'unique', 'paint'], color: 'text-indigo-500', borderColor: 'border-indigo-400', img: 'img/qiqi.jpg' },
                { id: 'gwen-cafe', name: 'Gwen CafÃ©', title: 'La Detallista', desc: 'Te fijas en los pequeÃ±os detalles. Te gusta tener todo ordenado en tu banquillo. Eres dulce pero cortante si te molestan.', traits: ['cute', 'neat', 'sweet', 'scissor'], color: 'text-purple-600', borderColor: 'border-purple-400', img: 'img/gwencuties.jpg' },

                // GRUPO 6: CHILL / TROLL / VIBES (Los olvidados)
                { id: 'kapi', name: 'Kapi', title: 'El Chill Vibes', desc: 'TÃº no te estresas. Pones mÃºsica lofi, fuerzas la misma composiciÃ³n de siempre y disfrutas. Si pierdes, al menos estabas cÃ³modo.', traits: ['chill', 'vibes', 'music', 'nature'], color: 'text-emerald-500', borderColor: 'border-emerald-400', img: 'img/kapi.jpg' },
                { id: 'molediver', name: 'Topobrero', title: 'El Trabajador Humilde', desc: 'Nadie te nota, pero siempre quedas Top 4. Trabajas en silencio, acumulas recursos poco a poco y eres constante. Un obrero del TFT.', traits: ['work', 'humble', 'dirt', 'steady'], color: 'text-yellow-700', borderColor: 'border-yellow-600', img: 'img/molediver.jpg' },
                { id: 'duckbill', name: 'Ornitorrinco', title: 'El Caos Ruidoso', desc: 'Â¡BotÃ³n D! Â¡BotÃ³n D! Te encanta el Reroll compulsivo. Haces mucho ruido, spameas el chat y juegas fichas de coste 1 al nivel 3.', traits: ['noise', 'spam', 'reroll', 'hyper'], color: 'text-yellow-500', borderColor: 'border-yellow-400', img: 'img/duckbill.jpg' },
                { id: 'dango', name: 'Dango', title: 'La Mascota Feliz', desc: 'Ruedas por el tablero sin saber muy bien quÃ© pasa, pero eres feliz. Tu inocencia (y suerte) te protege de los tryhards.', traits: ['happy', 'cute', 'luck', 'roll'], color: 'text-lime-500', borderColor: 'border-lime-400', img: 'img/dango.jpg' },
                { id: 'fenroar', name: 'Fenrugido', title: 'El GuardiÃ¡n Leal', desc: 'Juegas composiciones defensivas. Te gusta proteger a tus unidades y jugar tanques inmortales que aguanten todo el tiempo extra.', traits: ['guard', 'tank', 'loyal', 'wild'], color: 'text-slate-600', borderColor: 'border-slate-400', img: 'img/fenroar.jpg' },
                { id: 'ossia', name: 'Ossia', title: 'La Reina del Ritmo', desc: 'Juegas con flow. Sabes cuÃ¡ndo subir de nivel y cuÃ¡ndo gastar, todo tiene un ritmo musical para ti. Si la mÃºsica es buena, la partida es buena.', traits: ['rhythm', 'cool', 'dance', 'tempo'], color: 'text-cyan-600', borderColor: 'border-cyan-400', img: 'img/ossia.jpg' }
            ];

            // --- PREGUNTAS DIRIGIDAS (Cada opciÃ³n apunta a grupos especÃ­ficos) ---
            const questions = [
                {
                    text: "Â¿CuÃ¡l es tu filosofÃ­a al empezar la partida?",
                    options: [
                        { text: "Agresividad pura. Quiero ver sangre en la etapa 2-1.", points: ['aggro', 'fire', 'annie-chibi', 'burno'] },
                        { text: "Paciencia. Voy a perder vida para tener mejor economÃ­a.", points: ['money', 'risk', 'mf-bb', 'aoshin-sun'] },
                        { text: "Adaptabilidad. Compro lo que me sale y veo quÃ© pasa.", points: ['flex', 'survivor', 'kaisa-chibi', 'pengu'] },
                        { text: "EstÃ©tica. Compro las fichas que se ven bonitas juntas.", points: ['star', 'visuals', 'ahri-sg', 'lux-sg'] },
                        { text: "RelajaciÃ³n. Pongo mÃºsica y juego lo de siempre.", points: ['chill', 'vibes', 'kapi', 'dango'] }
                    ]
                },
                {
                    text: "Pierdes una ronda por MUY poco. Tu reacciÃ³n:",
                    options: [
                        { text: "Analizo el posicionamiento para no fallar la prÃ³xima.", points: ['micro', 'skill', 'yasuo-chibi', 'ravenlord'] },
                        { text: "Me enfado y golpeo la mesa (o el teclado).", points: ['rage', 'tilt', 'burno', 'annie-chibi'] },
                        { text: "Me da igual, mi composiciÃ³n escala mejor a largo plazo.", points: ['late', 'patience', 'aoshin-sun', 'molediver'] },
                        { text: "Spameo un emote triste o lloro en el chat.", points: ['cute', 'spam', 'dango', 'duckbill'] },
                        { text: "Busco quÃ© objeto me faltÃ³ para equiparlo luego.", points: ['items', 'calc', 'ezreal-chibi', 'ekko-chibi'] }
                    ]
                },
                {
                    text: "Â¿QuÃ© tipo de composiciones prefieres?",
                    options: [
                        { text: "Las 'Verticales' (Ej: 9 Jonia). Me gusta completar la lista.", points: ['vertical', 'classic', 'lux-sg', 'pengu'] },
                        { text: "Reroll de coste 1. Quiero fichas doradas al inicio.", points: ['reroll', 'hyper', 'duckbill', 'annie-chibi'] },
                        { text: "Composiciones creativas que inventÃ© yo mismo.", points: ['art', 'create', 'qiqi', 'offmeta'] },
                        { text: "Tanques inmortales que aguanten infinito.", points: ['tank', 'guard', 'fenroar', 'molediver'] },
                        { text: "Full Legendarias de coste 5 (Bill Gates).", points: ['rich', 'powerful', 'mf-bb', 'aoshin-sun'] }
                    ]
                },
                {
                    text: "Un rival te roba tu campeÃ³n en el carrusel...",
                    options: [
                        { text: "Lo anoto en mi lista negra. Se va a enterar.", points: ['evil', 'toxic', 'teemo-devil', 'katarina-ba'] },
                        { text: "Busco rÃ¡pidamente una alternativa, no me congelo.", points: ['adapt', 'instinct', 'kaisa-chibi', 'ekko-chibi'] },
                        { text: "Grito a la pantalla. Â¡ERA MÃO!", points: ['impulsive', 'noise', 'duckbill', 'burno'] },
                        { text: "Suspiro y sigo escuchando mi playlist.", points: ['chill', 'music', 'kapi', 'ossia'] },
                        { text: "Miro si hay algo mÃ¡s brillante o bonito que sobrÃ³.", points: ['visuals', 'optimist', 'ahri-sg', 'gwen-cafe'] }
                    ]
                },
                {
                    text: "Â¿QuÃ© es lo que mÃ¡s valoras en tu tablero?",
                    options: [
                        { text: "Que mis campeones tengan los objetos perfectos.", points: ['items', 'tech', 'ezreal-chibi', 'ekko-chibi'] },
                        { text: "Que sea visualmente armÃ³nico y combine colores.", points: ['art', 'rainbow', 'qiqi', 'lux-sg'] },
                        { text: "Que sea matemÃ¡ticamente eficiente y meta.", points: ['meta', 'calc', 'ravenlord', 'yasuo-chibi'] },
                        { text: "Que tenga una frontline (tanques) impenetrable.", points: ['tank', 'guard', 'fenroar', 'molediver'] },
                        { text: "Que haga mucho daÃ±o explosivo muy rÃ¡pido.", points: ['assassin', 'sharp', 'katarina-ba', 'annie-chibi'] }
                    ]
                },
                {
                    text: "EstÃ¡s en racha de derrotas. Â¿El plan?",
                    options: [
                        { text: "Seguir perdiendo a propÃ³sito para cobrar el botÃ­n.", points: ['money', 'risk', 'mf-bb', 'teemo-devil'] },
                        { text: "Rodar todo mi oro hasta 0 para estabilizarme.", points: ['impulsive', 'aggro', 'burno', 'annie-chibi'] },
                        { text: "Mantener la calma, trabajar duro y remontar poco a poco.", points: ['work', 'steady', 'molediver', 'pengu'] },
                        { text: "Inventar un giro drÃ¡stico de guion. Â¡Pivot!", points: ['create', 'unique', 'qiqi', 'kaisa-chibi'] },
                        { text: "Confiar en la suerte y en el 'CorazÃ³n de las Cartas'.", points: ['luck', 'magic', 'dango', 'ahri-sg'] }
                    ]
                },
                {
                    text: "Elige un Aumento (Augment) ideal:",
                    options: [
                        { text: "'Forja PortÃ¡til'. Â¡Dame artefactos Ãºnicos!", points: ['items', 'explorer', 'ezreal-chibi', 'qiqi'] },
                        { text: "'Hedge Fund' o 'Rich Get Richer'. Â¡DINERO!", points: ['rich', 'money', 'mf-bb', 'aoshin-sun'] },
                        { text: "'Sector Comercial'. Â¡Reroll gratis cada turno!", points: ['reroll', 'spam', 'duckbill', 'dango'] },
                        { text: "'Loto Adornado'. Â¡CrÃ­ticos y brillo por todas partes!", points: ['star', 'visuals', 'ahri-sg', 'lux-sg'] },
                        { text: "'CibernÃ©tico' o Stats puros. Eficiencia de combate.", points: ['micro', 'skill', 'yasuo-chibi', 'ravenlord'] }
                    ]
                },
                {
                    text: "Â¿QuÃ© haces mientras juegas?",
                    options: [
                        { text: "Escucho mÃºsica o podcasts, relax total.", points: ['music', 'vibes', 'kapi', 'ossia'] },
                        { text: "Miro las estadÃ­sticas de otras webs (MetaTFT/Tactics).", points: ['meta', 'tech', 'ravenlord', 'ekko-chibi'] },
                        { text: "Como snacks (y a veces ensucio el teclado).", points: ['happy', 'cute', 'dango', 'choncc-pink'] },
                        { text: "Hablo solo o narro mi propia partida Ã©picamente.", points: ['hero', 'showoff', 'pengu', 'ezreal-chibi'] },
                        { text: "Miro intensamente la pantalla, ni parpadeo.", points: ['competitive', 'focus', 'katarina-ba', 'yasuo-chibi'] }
                    ]
                },
                {
                    text: "Llegas al Top 4. Â¿EstÃ¡s satisfecho?",
                    options: [
                        { text: "No. Si no es Top 1, es una derrota.", points: ['competitive', 'win', 'katarina-ba', 'ravenlord'] },
                        { text: "SÃ­, Top 4 es puntos gratis. Trabajo honesto.", points: ['humble', 'work', 'molediver', 'pengu'] },
                        { text: "Depende de si mi comp quedÃ³ bonita al final.", points: ['art', 'neat', 'qiqi', 'gwen-cafe'] },
                        { text: "Me da igual, solo quiero ver si mi dragÃ³n matÃ³ a todos.", points: ['dragon', 'powerful', 'aoshin-sun', 'annie-chibi'] },
                        { text: "Â¡SÃ! Â¡He sobrevivido! Â¡CelebraciÃ³n!", points: ['happy', 'party', 'duckbill', 'dango'] }
                    ]
                },
                {
                    text: "Â¿CuÃ¡l es tu animal espiritual en el juego?",
                    options: [
                        { text: "Un lobo o leÃ³n guardiÃ¡n.", points: ['guard', 'wild', 'fenroar', 'yasuo-chibi'] },
                        { text: "Un topo o tejÃ³n trabajador.", points: ['work', 'dirt', 'molediver', 'kapi'] },
                        { text: "Un zorro o gato elegante.", points: ['star', 'cute', 'ahri-sg', 'gwen-cafe'] },
                        { text: "Un dragÃ³n o bestia mÃ­tica.", points: ['dragon', 'fire', 'aoshin-sun', 'annie-chibi'] },
                        { text: "Un pequeÃ±o demonio molesto.", points: ['evil', 'troll', 'teemo-devil', 'duckbill'] }
                    ]
                },
                {
                    text: "Estilo de baile/mÃºsica favorito para tu minileyenda:",
                    options: [
                        { text: "K-Pop o Pop brillante y coreografiado.", points: ['dance', 'diva', 'ahri-sg', 'ossia'] },
                        { text: "Lofi Hip Hop o Jazz suave.", points: ['chill', 'rhythm', 'kapi', 'qiqi'] },
                        { text: "Rock pesado o Metal para la batalla.", points: ['rage', 'fire', 'burno', 'katarina-ba'] },
                        { text: "MÃºsica Ã©pica orquestal de jefe final.", points: ['late', 'boss', 'aoshin-sun', 'ravenlord'] },
                        { text: "Sonidos random y ruidos divertidos.", points: ['noise', 'spam', 'duckbill', 'dango'] }
                    ]
                },
                {
                    text: "Ãšltima: Â¿Por quÃ© deberÃ­as ganar este lobby?",
                    options: [
                        { text: "Porque he sido el mÃ¡s inteligente y calculador.", points: ['smart', 'calc', 'ekko-chibi', 'ravenlord'] },
                        { text: "Porque tengo el mejor estilo y estÃ©tica.", points: ['star', 'visuals', 'ahri-sg', 'lux-sg'] },
                        { text: "Porque he trabajado duro desde abajo.", points: ['humble', 'survivor', 'molediver', 'kaisa-chibi'] },
                        { text: "Porque simplemente soy el protagonista.", points: ['hero', 'showoff', 'pengu', 'ezreal-chibi'] },
                        { text: "Porque voy a quemarlos a todos, jaja.", points: ['evil', 'fire', 'teemo-devil', 'annie-chibi'] }
                    ]
                }
            ];
        const App = () => {
            const [started, setStarted] = useState(false);
            const [currentQuestion, setCurrentQuestion] = useState(0);
            const [scores, setScores] = useState({});
            const [result, setResult] = useState(null);

            useEffect(() => {
                if (window.lucide) window.lucide.createIcons();
            });

            const startQuiz = () => setStarted(true);

            const handleAnswer = (points) => {
                const newScores = { ...scores };
                points.forEach(trait => {
                    characters.forEach(char => {
                        if (char.traits.includes(trait)) {
                            newScores[char.id] = (newScores[char.id] || 0) + 1;
                        }
                    });
                });
                setScores(newScores);
                if (currentQuestion < questions.length - 1) {
                    setCurrentQuestion(currentQuestion + 1);
                } else {
                    calculateResult(newScores);
                }
            };

            const calculateResult = (finalScores) => {
                let winner = characters[0];
                let maxScore = -1;
                const shuffledChars = [...characters].sort(() => 0.5 - Math.random());
                shuffledChars.forEach(char => {
                    const score = finalScores[char.id] || 0;
                    if (score > maxScore) {
                        maxScore = score;
                        winner = char;
                    }
                });
                setResult(winner);
            };

            const restart = () => {
                setStarted(false);
                setCurrentQuestion(0);
                setScores({});
                setResult(null);
            };

            const shareOnX = () => {
                const element = document.querySelector('#results-card');
                const buttons = document.querySelector('#action-buttons');
                if (buttons) buttons.style.display = 'none';
                if (window.html2canvas) {
                    window.html2canvas(element, {
                        backgroundColor: null,
                        scale: 2,
                        useCORS: true,
                        logging: false
                    }).then(canvas => {
                        if (buttons) buttons.style.display = 'flex';
                        const link = document.createElement('a');
                        link.download = `TFT-Minileyenda-${result.name.replace(/\s+/g, '-')}.png`;
                        link.href = canvas.toDataURL();
                        link.click();
                        setTimeout(() => {
                            const text = `Â¡Soy ${result.name} en el mundo de TFT! âœ¨\n\n"${result.title}"\nDescubre tu arquetipo de estratega aquÃ­:\n\n(Adjunta la imagen descargada ðŸ“¸)\n\n#TFT #TeamfightTactics #Quiz`;
                            const url = window.location.href;
                            const twitterUrl = `https://twitter.com/intent/tweet?text=${encodeURIComponent(text)}&url=${encodeURIComponent(url)}`;
                            window.open(twitterUrl, '_blank');
                        }, 1500);
                    }).catch(err => {
                        console.error("Error al capturar:", err);
                        if (buttons) buttons.style.display = 'flex';
                        alert("Hubo un problema al generar la imagen.");
                    });
                }
            };

            // --- PANTALLA INICIO ---
            if (!started) {
                return (
                    <div className="min-h-screen flex flex-col items-center justify-center p-6 relative overflow-hidden">
                        <div className="bg-noise"></div>
                        <div className="aura-blob aura-purple"></div>
                        <div className="aura-blob aura-lime"></div>

                        <div className="glass-card max-w-lg w-full p-10 text-center relative z-10 mb-8">
                            <div className="mb-6 flex justify-center">

                                <div className="w-64 h-64 bg-white rounded-full flex items-center justify-center shadow-lg border-4 border-purple-100 overflow-hidden relative group rotate-3">

                                    <div className="absolute inset-0 bg-gradient-to-tr from-purple-200/20 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-500"></div>
                                    <img src="img/tft-logo.jpg" alt="TFT Logo" className="w-full h-full object-cover transition-transform duration-500 group-hover:scale-110" />
                                </div>
                            </div>

                            <h1 className="text-5xl md:text-6xl font-serif italic text-slate-900 mb-6 leading-tight">
                                 Â¿QuÃ© Minileyenda <br />
                                <span className="text-purple-600 not-italic font-bold tracking-tighter text-4xl md:text-5xl block mt-2">ERES?
                                    </span>
                            </h1>

                            <p className="text-lg text-slate-600 mb-10 font-light leading-relaxed">
                                Descubre quÃ© estratega legendario resuena con tu personalidad. Â¿Eres caos, orden o pura magia?
                            </p>

                            <button onClick={startQuiz} className="btn-pill group flex items-center justify-center gap-3 mx-auto w-full md:w-auto cursor-pointer">
                                Iniciar Test <ArrowRight size={18} className="group-hover:translate-x-1 transition-transform" />
                            </button>

                            <div className="mt-8 pt-6 border-t border-purple-100 flex justify-center gap-6 text-purple-400">
                                <Star size={16} /> <Sparkles size={16} /> <Zap size={16} />
                            </div>
                        </div>

                        <footer className="text-center text-xs text-slate-400 font-light max-w-md leading-relaxed z-10">
                            <p className="mb-2"><em>Disclaimer:</em> Esta aplicaciÃ³n es un proyecto de fans y no estÃ¡ afiliada, respaldada ni patrocinada por <strong className="text-purple-600 font-medium">Riot Games</strong>.</p>
                            <p>Design & Code by Danae G. Â© 2025</p>
                        </footer>
                    </div>
                );
            }

            // --- PANTALLA RESULTADO ---
            if (result) {
                return (
                    <div className="min-h-screen flex items-center justify-center p-6 relative overflow-hidden">
                        <div className="bg-noise"></div>
                        <div className="aura-blob aura-pink"></div>
                        <div className="aura-blob aura-purple"></div>

                        <div id="results-card" className="max-w-md w-full overflow-hidden relative z-10 rounded-3xl shadow-2xl bg-white border border-slate-200">
                            <div className="h-64 w-full relative flex items-center justify-center overflow-hidden bg-slate-50">
                                <img src={result.img} className="absolute inset-0 w-full h-full object-cover opacity-30 blur-xl scale-110" />
                                <div className="w-40 h-40 rounded-full border-4 border-white shadow-xl overflow-hidden relative z-10">
                                    <img src={result.img} alt={result.name} className="w-full h-full object-cover" />
                                </div>
                                <div className="absolute bottom-0 left-0 w-full h-16 bg-gradient-to-t from-white/90 to-transparent z-0"></div>
                            </div>

                            <div className="relative -mt-6 flex justify-center z-20">
                                <div className="bg-white p-2 rounded-full shadow-md border border-slate-100">
                                    <div className="bg-purple-50 p-2 rounded-full">
                                        <Crown size={20} className={result.color} />
                                    </div>
                                </div>
                            </div>

                            <div className="px-8 pb-10 pt-4 text-center bg-gradient-to-b from-white to-purple-50/20">
                                <h1 className={`text-3xl font-serif font-bold mb-1 leading-tight text-center ${result.color}`}>
                                    {result.name}
                                </h1>
                                <p className="text-slate-400 font-mono text-xs uppercase tracking-[0.2em] mb-6 text-center">
                                    {result.title}
                                </p>

                                <div className="bg-white p-6 rounded-2xl border border-slate-100 shadow-sm mb-8">
                                    <p className="text-slate-600 leading-relaxed font-light text-base italic">"{result.desc}"</p>
                                </div>

                                <div className="flex flex-wrap justify-center gap-2 mb-8">
                                    {result.traits.map(trait => (
                                        <span key={trait} className="px-4 py-1.5 bg-white border border-slate-200 rounded-full text-[10px] font-bold text-slate-500 uppercase tracking-wider shadow-sm">
                                            {trait}
                                        </span>
                                    ))}
                                </div>

                                <div id="action-buttons" className="flex flex-col gap-3 mt-4 pt-6 border-t border-slate-200">
                                    <button onClick={shareOnX} className="btn-pill w-full flex items-center justify-center gap-2 group shadow-lg shadow-purple-200 cursor-pointer">
                                        Compartir en X <Share2 size={16} /> <span className="text-[10px] opacity-80 font-normal normal-case">(Descarga imagen)</span>
                                    </button>
                                    <button onClick={restart} className="btn-outline w-full justify-center border-slate-300 text-slate-500 hover:text-purple-600 cursor-pointer">
                                        <RefreshCcw size={16} /> Volver a jugar
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                );
            }

            // --- PANTALLA PREGUNTA ---
            const question = questions[currentQuestion];
            const progress = ((currentQuestion + 1) / questions.length) * 100;

            return (
                <div className="min-h-screen flex flex-col items-center justify-center p-6 relative overflow-hidden">
                    <div className="bg-noise"></div>
                    <div className="aura-blob aura-lime"></div>
                    <div className="aura-blob aura-main"></div>

                    <div className="max-w-xl w-full z-10">
                        <div className="mb-8">
                            <div className="flex justify-between items-end mb-4">
                                <span className="text-sm font-bold text-purple-600 tracking-widest uppercase">Pregunta {currentQuestion + 1}</span>
                                <span className="text-xs text-slate-400 font-mono">/ {questions.length}</span>
                            </div>
                            <div className="h-1.5 w-full progress-track rounded-full overflow-hidden">
                                <div className="h-full progress-fill transition-all duration-500 ease-out" style={{ width: `${progress}%` }}></div>
                            </div>
                        </div>

                        <div className="glass-card p-8 md:p-10 mb-6">
                            <h2 className="text-2xl md:text-3xl font-serif text-slate-900 leading-snug">
                                {question.text}
                            </h2>
                        </div>

                        <div className="space-y-3">
                            {question.options.map((option, idx) => (
                                <button
                                    key={idx}
                                    onClick={() => handleAnswer(option.points)}
                                    className="btn-option w-full group flex items-center justify-between cursor-pointer"
                                >
                                    <span className="text-slate-600 group-hover:text-purple-900 font-medium text-lg">
                                        {option.text}
                                    </span>
                                    <div className="w-6 h-6 rounded-full border-2 border-slate-200 group-hover:border-purple-500 group-hover:bg-purple-50 transition-colors flex items-center justify-center">
                                        <div className="w-2.5 h-2.5 rounded-full bg-purple-500 opacity-0 group-hover:opacity-100 transition-opacity"></div>
                                    </div>
                                </button>
                            ))}
                        </div>
                    </div>
                </div>
            );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>

</html>